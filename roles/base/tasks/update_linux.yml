- name: update Arch-based systems, equivalent to 'pacman -Syu'
  pacman:
    update_cache: true
    upgrade: true
  when: ansible_os_family == 'Archlinux'

- name: udpate Debian-based systems, equivalent to 'apt update; apt upgrade'
  apt:
    update_cache: true
    upgrade: true
  when: ansible_os_family == 'Debian'

- name: udpate RedHat-based systems, equivalent to 'yum update; yum upgrade'
  yum:
    update_cache: true
    name: '*'
    state: latest
  when: ansible_os_family == 'RedHat'

- name: reboot host to apply updates (If kernel is updated and the system is not rebooted, there are conflicts with ufw/iptables later on)
  reboot:
